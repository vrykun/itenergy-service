---
services:
  itenergy-service:
    build: .
    container_name: itenergy
    depends_on:
      - itenergy-service-postgres
    volumes:
      - ${PWD}:/app
    command: ["uvicorn", "itenergy.app:app", "--host", "0.0.0.0", "--port", "8000"]

  itenergy-service-postgres:
    container_name: itenergy-service-postgres
    image: postgres:14.2
    environment:
      PGHOST: itenergy-service-postgres
      PGPORT: 5432
      POSTGRES_DB: itenergy
      POSTGRES_USER: itenergy
      POSTGRES_PASSWORD: password
    ports:
      - 5433:5432